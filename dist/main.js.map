{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["var _pageShare;\r\nvar moduleApp = {\r\n    'init': function () {\r\n        moduleApp.pollifil();\r\n        moduleApp.sliderSwiper();\r\n        moduleApp.formValidation();\r\n    },\r\n    'pollifil': function(){\r\n        if (!(\"classList\" in window.document.body)) {\r\n            Object.defineProperty(Element.prototype, 'classList', {\r\n                get: function() {\r\n                    var self = this, bValue = self.className.split(\" \")\r\n                    bValue.add = function (){\r\n                        var b;\r\n                        for(var i in arguments){\r\n                            b = true;\r\n                            for (var j = 0; j<bValue.length;j++)\r\n                                if (bValue[j] == arguments[i]){\r\n                                    b = false;\r\n                                    break\r\n                                }\r\n                            if(b)\r\n                                self.className += (self.className?\" \":\"\")+arguments[i]\r\n                        }\r\n                    };\r\n                    bValue.remove = function(){\r\n                        self.className = \"\";\r\n                        for(var i in arguments)\r\n                            for (var j = 0; j<bValue.length;j++)\r\n                                if(bValue[j] != arguments[i])\r\n                                    self.className += (self.className?\" \" :\"\")+bValue[j]\r\n                    };\r\n                    bValue.toggle = function(x){\r\n                        var b;\r\n                        if(x){\r\n                            self.className = \"\";\r\n                            b = false;\r\n                            for (var j = 0; j<bValue.length;j++)\r\n                                if(bValue[j] != x){\r\n                                    self.className += (self.className?\" \" :\"\")+bValue[j];\r\n                                    b = false;\r\n                                } else b = true;\r\n                            if(!b)\r\n                                self.className += (self.className?\" \":\"\")+x\r\n                        } else throw new TypeError(\"Failed to execute 'toggle': 1 argument required\");\r\n                        return !b;\r\n                    };\r\n\r\n                    return bValue;\r\n                },\r\n                enumerable: false\r\n            });\r\n        };\r\n\r\n        (function() {\r\n            var lastTime = 0;\r\n            var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n            for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n                window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\r\n                window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\r\n                    || window[vendors[x]+'CancelRequestAnimationFrame'];\r\n            }\r\n\r\n            if (!window.requestAnimationFrame)\r\n                window.requestAnimationFrame = function(callback, element) {\r\n                    var currTime = new Date().getTime();\r\n                    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                    var id = window.setTimeout(function() { callback(currTime + timeToCall); },\r\n                        timeToCall);\r\n                    lastTime = currTime + timeToCall;\r\n                    return id;\r\n                };\r\n\r\n            if (!window.cancelAnimationFrame)\r\n                window.cancelAnimationFrame = function(id) {\r\n                    clearTimeout(id);\r\n                };\r\n        }());\r\n    },\r\n    'popupOpen': function (content, style, beforeFunction, afterFunction, beforeClose, $subject) {\r\n        $subject = $subject || $;\r\n        content = content || '';\r\n        style = style || 'fb-default-style';\r\n        beforeFunction = beforeFunction || '';\r\n        afterFunction = afterFunction || false;\r\n        beforeClose = beforeClose || false;\r\n        $subject.fancybox({\r\n            content: content,\r\n            wrapCSS: style,\r\n            padding: 0,\r\n            margin: 10,\r\n            fitToView: false,\r\n            openEffect: 'drop',\r\n            closeEffect: 'drop',\r\n            scrolling: 'auto',\r\n            maxWidth: 1100,\r\n            //maxWidth:'100%',\r\n            maxHeight: 800,\r\n            autoHeight: true,\r\n            'beforeShow': function () {\r\n                if (beforeFunction) {\r\n                    beforeFunction();\r\n                }\r\n                hasPlaceholderSupport = function () {\r\n                    var input = document.createElement('input');\r\n                    return ('placeholder' in input);\r\n                }\r\n            },\r\n            'afterShow': function () {\r\n                $('.fancybox-wrap').addClass('fancybox-wrap-open');\r\n                if (afterFunction) {\r\n                    afterFunction();\r\n                }\r\n            },\r\n            'beforeClose': function () {\r\n                var $thisWrapper = $('.fancybox-wrap');\r\n                if ($thisWrapper.hasClass('fancybox-wrap-close')) {\r\n                    return true;\r\n                } else {\r\n                    if (beforeClose) {\r\n                        beforeClose();\r\n                    }\r\n                    $thisWrapper.addClass('fancybox-wrap-close');\r\n                    setTimeout(function () {\r\n                        $.fancybox.close();\r\n                    }, 300);\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n    },\r\n    'formValidation': function ($submitBtn, submitFunction) {\r\n        submitFunction = submitFunction || false;\r\n        $submitBtn = $submitBtn || $('.js-form-submit');\r\n        var $submitForm = $submitBtn.closest('form');\r\n        $submitForm.addClass('is-form-validation');\r\n        var errorValidate = 'Поле обязательно для заполнения';\r\n        var errorValidate2 = 'Поле заполнено не корректно';\r\n\r\n        if(!device.mobile()){\r\n            if(!device.tablet() || !device.android()){\r\n                $submitForm.find('[data-mask=\"phone\"]').mask(\"+7 (999) 999 99 99\", {placeholder: \"-\"});\r\n            }\r\n            else{\r\n                $submitForm.find('[data-mask=\"phone\"]').attr('type','number');\r\n            }\r\n        }\r\n        else{\r\n            $submitForm.find('[data-mask=\"phone\"]').attr('type','number');\r\n        }\r\n\r\n        $submitBtn.click(function (e) {\r\n            e.preventDefault();\r\n\r\n            var $this = $(this);\r\n            var $thisForm = $this.closest('form');\r\n            if ($this.hasClass('disabled')) {\r\n                return false;\r\n            }\r\n            var $forms = $thisForm.find('[data-validate]');\r\n            var result = formChecking($forms, true);\r\n            if (result) {\r\n                if (submitFunction) {\r\n                    $this.addClass('disabled');\r\n                    submitFunction($thisForm);\r\n                }\r\n                else{\r\n                    setTimeout(function() {\r\n                        $thisForm.submit();\r\n                    }, 50);\r\n                }\r\n            }\r\n            else {\r\n                $forms.on('keyup keypress change', function () {\r\n                    var $current = $(this);\r\n                    setTimeout(function () {\r\n                        formChecking($current, true);\r\n                    }, 100);\r\n                });\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        $(document).on('keydown', function (e) {\r\n            return true;\r\n            if (e.keyCode == 13) {\r\n                var $thisFocus = $(document.activeElement);\r\n                if ($thisFocus.is('textarea')) {\r\n                    return true;\r\n                }\r\n                if ($thisFocus.closest('.form-select').length) {\r\n                    return true;\r\n                }\r\n                if ($thisFocus.closest('.is-form-validation').length) {\r\n                    $submitBtn.trigger('click');\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\n\r\n        function formChecking($inp, onFocus) {\r\n\r\n            onFocus = onFocus || false;\r\n            var noError = true;\r\n\r\n            $inp.each(function (ind, elm) {\r\n\r\n                var $this = $(elm);\r\n                var mask = $this.data('validate');\r\n                var value = $this.val();\r\n                var placeHolder = $this.attr('placeholder');\r\n\r\n                if($this.is(':visible')){\r\n                    if (mask == 'text') {\r\n                        if ((value.length < 1) || (value == placeHolder)) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'phone') {\r\n                        if ((value.length < 1) || (value.indexOf('-') > -1)) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'file') {\r\n                        if (value.length < 2) {\r\n                            noError = false;\r\n                            $this.closest('.form-file').addClass('show-error');\r\n                            if (onFocus) {\r\n                                $this.focus();\r\n                                onFocus = false;\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-file').removeClass('show-error');\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'textarea') {\r\n                        if ((value.length < 3) || (value == placeHolder)) {\r\n                            noError = false;\r\n                            $this.closest('.form-textarea').addClass('show-error');\r\n                            $this.closest('.form-textarea').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-textarea').removeClass('show-error');\r\n                            $this.closest('.form-textarea').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'email') {\r\n                        if(value != ''){\r\n                            var regex = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,5})$/;\r\n                            if (!regex.test(value) || (value == placeHolder)) {\r\n                                noError = false;\r\n                                $this.closest('.form-input').addClass('show-error');\r\n                                $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                                if (onFocus) {\r\n                                    if(!device.ios()){\r\n                                        $this.focus();\r\n                                        onFocus = false;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                $this.closest('.form-input').removeClass('show-error');\r\n                                $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if(mask == \"email-required\"){\r\n                        var regex = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,5})$/;\r\n                        if (!regex.test(value) || (value == placeHolder)) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'filter-email') {\r\n                        var regex = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n                        if (regex.test(value) || (value == '')) {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        } else {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'select') {\r\n                        if (!value) {\r\n                            noError = false;\r\n                            if (onFocus) {\r\n                                onFocus = false;\r\n                            }\r\n                            $this.closest('.form-select').addClass('show-error');\r\n                            $this.closest('.form-select').find('.form-item-error').slideDown(200);\r\n                        } else {\r\n                            $this.closest('.form-select').removeClass('show-error');\r\n                            $this.closest('.form-select').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'checkbox') {\r\n                        if (!$this.is(':checked')) {\r\n                            noError = false;\r\n                            if (onFocus) {\r\n                                onFocus = false;\r\n                            }\r\n                            $this.closest('.form-checkbox').addClass('show-error');\r\n                            $this.closest('.form-checkbox').find('.form-item-error').slideUp(200);\r\n                        } else {\r\n                            $this.closest('.form-checkbox').removeClass('show-error');\r\n                            $this.closest('.form-checkbox').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'captcha') {\r\n                        var response = grecaptcha.getResponse();\r\n                        if (response.length == 0){\r\n                            noError = false;\r\n                            if (onFocus) {\r\n                                onFocus = false;\r\n                            }\r\n                            $this.addClass('show-error');\r\n                        } else {\r\n                            $this.removeClass('show-error');\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'serial-number'){\r\n                        var regex = /[0-9]{9,}/;\r\n                        if (!regex.test(value) || (value == placeHolder)) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if (mask == 'pass') {\r\n                        if (value.length < 6) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if(mask == 'two-pass'){\r\n                        var pass = $('.fancybox-inner .password').val();\r\n                        if(value == '' || value != pass){\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        else{\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n\r\n                    if(mask == 'date'){\r\n                        if (value.length < 1) {\r\n                            noError = false;\r\n                            $this.closest('.form-input').addClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideDown(200);\r\n                            if (onFocus) {\r\n                                if(!device.ios()){\r\n                                    $this.focus();\r\n                                    onFocus = false;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $this.closest('.form-input').removeClass('show-error');\r\n                            $this.closest('.form-input').find('.form-item-error').slideUp(200);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            setTimeout(function(){\r\n                $.fancybox.update();\r\n            },300);\r\n\r\n            return noError;\r\n        }\r\n    },\r\n    'sliderSwiper': function () {\r\n        if($('.js-main-slider').length> 0){\r\n            console.log('swiper');\r\n\r\n            var configMain = {\r\n                    slidesPerView: 1,\r\n                    centeredSlides: false,\r\n                    paginationClickable: true,\r\n                    spaceBetween: 0,\r\n                    pagination: '.swiper-pagination',\r\n                    onSlideChangeStart: function(){\r\n                    }\r\n                },\r\n                $mainSlider = $('.js-main-slider');\r\n\r\n            if($('.js-main-slider .swiper-slide').length > 1){\r\n                var $mainSwiper = $mainSlider.swiper(configMain);\r\n            }\r\n        }\r\n\r\n        if($('.js-quote-slider').length > 0){\r\n            var configQuote = {\r\n                    slidesPerView: 1,\r\n                    centeredSlides: false,\r\n                    paginationClickable: true,\r\n                    spaceBetween: 0,\r\n                    pagination: '.swiper-pagination',\r\n                    onSlideChangeStart: function(){\r\n                    }\r\n                },\r\n                $quoteSlider = $('.js-quote-slider');\r\n\r\n            if($('.js-main-slider .swiper-slide').length > 1){\r\n                var $quoteSwiper = $quoteSlider.swiper(configQuote);\r\n            }\r\n        }\r\n\r\n    },\r\n};\r\n\r\n$(document).ready(function () {\r\n    moduleApp.init();\r\n});"],"file":"main.js"}